<% if current_user %>
	<div class="mdl-grid">
		<div class="mdl-cell mdl-cell--6-col">
			<%= link_to "Create a new service", new_service_path %>
		</div>
		<div class="mdl-cell mdl-cell--6-col">
			Some content here maybe?
		</div>
	</div>
	<hr>
<% end %>

<div class="mdl-grid">

	<% @services.each do |service| %>
		<% if (service.id % 4) == 0 %>
			<div class="mdl-cell mdl-cell--3-col mdl-cell--6-col-tablet mdl-cell--12-phone">
				<%= render 'services/services_card', :service => service %>
			</div>
		<% elsif service.id % 3 ==  0%>
			<div class="mdl-cell mdl-cell--3-col mdl-cell--6-col-tablet mdl-cell--12-phone">
				<%= render 'services/services_card', :service => service %>
			</div>
		<% elsif service.id % 2 ==  0%>
			<div class="mdl-cell mdl-cell--3-col mdl-cell--6-col-tablet mdl-cell--12-phone">
				<%= render 'services/services_card', :service => service %>
			</div>
		<% else %>
			<div class="mdl-cell mdl-cell--3-col mdl-cell--6-col-tablet mdl-cell--12-phone">
				<%= render 'services/services_card', :service => service %>
			</div>
		<% end %>
	<% end %>
</div>

<div id="content-list">
	<% @contents.each do |c| %>
		<div class="mdl-grid">
			<div class="mdl-cell mdl-cell--6-col mdl-cell--3-offset mdl-cell--12-col-tablet mdl-card mdl-shadow--3dp">
				<div class="mdl-card__title mdl-color--yellow-300">
	  				<%= c.heading %><% if !c.visible %><%= " | (not displayed)" %><% end -%>
				</div>
				<div class="mdl-card__supporting-text mdl-color-text--grey-600">
	  				<%= c.text.html_safe %>
				</div>
				<% if current_user %>
					<div class="mdl-card__actions mdl-card--border">
						<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="/contents/<%= c.id %>/edit">Edit</a>
						<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect deactivate-button" data-remote="true" href="/content/invisible/<%= c.id %>" style="display: <% if c.visible %><%= 'inline-flex' %><% else %><%= 'none' %><% end -%>">Do not display</a>
						<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect activate-button" data-remote="true" href="/content/visible/<%= c.id %>" style="display: <% if !c.visible %><%= 'inline-flex' %><% else %><%= 'none' %><% end -%>">Display</a>
					</div>
				<% end -%>
			</div>
		</div>
	<% end %>
</div>

<script>
// Deactivate walker
	$(".deactivate-button").each(function() {
		$(this).on("ajax:complete", function(event) {
			$(event.target).hide();
			$(event.target).next().show();
		});
	});

// Activate walker
	$(".activate-button").each(function() {
		$(this).on("ajax:complete", function(event) {
			$(event.target).hide();
			$(event.target).prev().show();
		});
	});
</script>